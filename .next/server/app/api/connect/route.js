"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/connect/route";
exports.ids = ["app/api/connect/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist\\client\\components\\action-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist\\client\\components\\request-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!*********************************************************************************************!*\
  !*** external "next/dist\\client\\components\\static-generation-async-storage.external.js" ***!
  \*********************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\static-generation-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconnect%2Froute&page=%2Fapi%2Fconnect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconnect%2Froute.ts&appDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconnect%2Froute&page=%2Fapi%2Fconnect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconnect%2Froute.ts&appDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_zhoum_OneDrive_Desktop_PacePlanner_app_api_connect_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/connect/route.ts */ \"(rsc)/./app/api/connect/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/connect/route\",\n        pathname: \"/api/connect\",\n        filename: \"route\",\n        bundlePath: \"app/api/connect/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\zhoum\\\\OneDrive\\\\Desktop\\\\PacePlanner\\\\app\\\\api\\\\connect\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_zhoum_OneDrive_Desktop_PacePlanner_app_api_connect_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/connect/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb25uZWN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb25uZWN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29ubmVjdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN6aG91bSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q1BhY2VQbGFubmVyJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUN6aG91bSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q1BhY2VQbGFubmVyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzZCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFjZXBsYW5uZXIvPzU3NjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcemhvdW1cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxQYWNlUGxhbm5lclxcXFxhcHBcXFxcYXBpXFxcXGNvbm5lY3RcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2Nvbm5lY3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jb25uZWN0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb25uZWN0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcemhvdW1cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxQYWNlUGxhbm5lclxcXFxhcHBcXFxcYXBpXFxcXGNvbm5lY3RcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY29ubmVjdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconnect%2Froute&page=%2Fapi%2Fconnect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconnect%2Froute.ts&appDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/connect/route.ts":
/*!**********************************!*\
  !*** ./app/api/connect/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_validators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/validators */ \"(rsc)/./lib/validators.ts\");\n/* harmony import */ var _lib_canvas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/canvas */ \"(rsc)/./lib/canvas.ts\");\n/* harmony import */ var _lib_crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/crypto */ \"(rsc)/./lib/crypto.ts\");\n/* harmony import */ var _lib_cookies__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/cookies */ \"(rsc)/./lib/cookies.ts\");\n// app/api/connect/route.ts\nconst runtime = \"nodejs\";\n\n\n\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_1__.PrismaClient();\n// Rate limiting (simple in-memory store)\nconst rateLimit = new Map();\nconst RATE_LIMIT_WINDOW = 60 * 1000 // 1 minute\n;\nconst RATE_LIMIT_MAX = 10 // 10 requests per minute\n;\nfunction checkRateLimit(ip) {\n    const now = Date.now();\n    const userLimit = rateLimit.get(ip);\n    if (!userLimit || now > userLimit.resetTime) {\n        rateLimit.set(ip, {\n            count: 1,\n            resetTime: now + RATE_LIMIT_WINDOW\n        });\n        return true;\n    }\n    if (userLimit.count >= RATE_LIMIT_MAX) {\n        return false;\n    }\n    userLimit.count++;\n    return true;\n}\nasync function POST(request) {\n    try {\n        const ip = request.ip || request.headers.get(\"x-forwarded-for\") || \"unknown\";\n        // Check rate limit\n        if (!checkRateLimit(ip)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Too many requests. Please try again later.\"\n            }, {\n                status: 429\n            });\n        }\n        const body = await request.json();\n        const { baseUrl, token } = body;\n        // Validate inputs\n        const validatedBaseUrl = _lib_validators__WEBPACK_IMPORTED_MODULE_2__.canvasBaseUrlSchema.parse(baseUrl);\n        const validatedToken = _lib_validators__WEBPACK_IMPORTED_MODULE_2__.canvasTokenSchema.parse(token);\n        // Verify token with Canvas\n        const user = await (0,_lib_canvas__WEBPACK_IMPORTED_MODULE_3__.verifyCanvasToken)(validatedBaseUrl, validatedToken);\n        // Encrypt token\n        const { ciphertext, iv } = await (0,_lib_crypto__WEBPACK_IMPORTED_MODULE_4__.encrypt)(validatedToken);\n        // Create or update user\n        const existingUser = await prisma.user.findFirst({\n            where: {\n                canvasBaseUrl: validatedBaseUrl\n            }\n        });\n        const dbUser = existingUser ? await prisma.user.update({\n            where: {\n                id: existingUser.id\n            },\n            data: {\n                encToken: ciphertext,\n                iv: iv\n            }\n        }) : await prisma.user.create({\n            data: {\n                canvasBaseUrl: validatedBaseUrl,\n                encToken: ciphertext,\n                iv: iv,\n                settings: {\n                    create: {\n                        workWindowsJson: JSON.stringify({\n                            \"1\": [\n                                [\n                                    \"19:00\",\n                                    \"22:00\"\n                                ]\n                            ],\n                            \"2\": [\n                                [\n                                    \"19:00\",\n                                    \"22:00\"\n                                ]\n                            ],\n                            \"3\": [\n                                [\n                                    \"19:00\",\n                                    \"22:00\"\n                                ]\n                            ],\n                            \"4\": [\n                                [\n                                    \"19:00\",\n                                    \"22:00\"\n                                ]\n                            ],\n                            \"5\": [\n                                [\n                                    \"19:00\",\n                                    \"22:00\"\n                                ]\n                            ],\n                            \"6\": [\n                                [\n                                    \"10:00\",\n                                    \"16:00\"\n                                ]\n                            ],\n                            \"0\": [\n                                [\n                                    \"10:00\",\n                                    \"16:00\"\n                                ]\n                            ]\n                        }),\n                        dailyMaxMinutes: 180,\n                        timezone: \"America/New_York\",\n                        useAIEstimates: false,\n                        aiAggressiveness: 0\n                    }\n                }\n            }\n        });\n        // Set user cookie\n        await (0,_lib_cookies__WEBPACK_IMPORTED_MODULE_5__.setUserCookie)(dbUser.id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            ok: true,\n            user: {\n                id: dbUser.id,\n                name: user.name,\n                email: user.email\n            }\n        });\n    } catch (error) {\n        console.error(\"Connect error:\", error);\n        if (error instanceof Error) {\n            if (error.message.includes(\"Invalid Canvas token\")) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Invalid Canvas token. Please check your token and try again.\"\n                }, {\n                    status: 401\n                });\n            }\n            if (error.message.includes(\"required permissions\")) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Canvas token does not have required permissions.\"\n                }, {\n                    status: 403\n                });\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to connect to Canvas. Please try again.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2Nvbm5lY3Qvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsMkJBQTJCO0FBQ3BCLE1BQU1BLFVBQVUsU0FBUztBQUV1QjtBQUNWO0FBQzRCO0FBQ3pCO0FBQ1Y7QUFDTztBQUU3QyxNQUFNUSxTQUFTLElBQUlOLHdEQUFZQTtBQUUvQix5Q0FBeUM7QUFDekMsTUFBTU8sWUFBWSxJQUFJQztBQUN0QixNQUFNQyxvQkFBb0IsS0FBSyxLQUFLLFdBQVc7O0FBQy9DLE1BQU1DLGlCQUFpQixHQUFHLHlCQUF5Qjs7QUFFbkQsU0FBU0MsZUFBZUMsRUFBVTtJQUNoQyxNQUFNQyxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLE1BQU1FLFlBQVlSLFVBQVVTLEdBQUcsQ0FBQ0o7SUFFaEMsSUFBSSxDQUFDRyxhQUFhRixNQUFNRSxVQUFVRSxTQUFTLEVBQUU7UUFDM0NWLFVBQVVXLEdBQUcsQ0FBQ04sSUFBSTtZQUFFTyxPQUFPO1lBQUdGLFdBQVdKLE1BQU1KO1FBQWtCO1FBQ2pFLE9BQU87SUFDVDtJQUVBLElBQUlNLFVBQVVJLEtBQUssSUFBSVQsZ0JBQWdCO1FBQ3JDLE9BQU87SUFDVDtJQUVBSyxVQUFVSSxLQUFLO0lBQ2YsT0FBTztBQUNUO0FBRU8sZUFBZUMsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1ULEtBQUtTLFFBQVFULEVBQUUsSUFBSVMsUUFBUUMsT0FBTyxDQUFDTixHQUFHLENBQUMsc0JBQXNCO1FBRW5FLG1CQUFtQjtRQUNuQixJQUFJLENBQUNMLGVBQWVDLEtBQUs7WUFDdkIsT0FBT2Isa0ZBQVlBLENBQUN3QixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQTZDLEdBQ3REO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxPQUFPLE1BQU1MLFFBQVFFLElBQUk7UUFDL0IsTUFBTSxFQUFFSSxPQUFPLEVBQUVDLEtBQUssRUFBRSxHQUFHRjtRQUUzQixrQkFBa0I7UUFDbEIsTUFBTUcsbUJBQW1CNUIsZ0VBQW1CQSxDQUFDNkIsS0FBSyxDQUFDSDtRQUNuRCxNQUFNSSxpQkFBaUI3Qiw4REFBaUJBLENBQUM0QixLQUFLLENBQUNGO1FBRS9DLDJCQUEyQjtRQUMzQixNQUFNSSxPQUFPLE1BQU03Qiw4REFBaUJBLENBQUMwQixrQkFBa0JFO1FBRXZELGdCQUFnQjtRQUNoQixNQUFNLEVBQUVFLFVBQVUsRUFBRUMsRUFBRSxFQUFFLEdBQUcsTUFBTTlCLG9EQUFPQSxDQUFDMkI7UUFFekMsd0JBQXdCO1FBQ3hCLE1BQU1JLGVBQWUsTUFBTTdCLE9BQU8wQixJQUFJLENBQUNJLFNBQVMsQ0FBQztZQUMvQ0MsT0FBTztnQkFBRUMsZUFBZVQ7WUFBaUI7UUFDM0M7UUFFQSxNQUFNVSxTQUFTSixlQUNYLE1BQU03QixPQUFPMEIsSUFBSSxDQUFDUSxNQUFNLENBQUM7WUFDdkJILE9BQU87Z0JBQUVJLElBQUlOLGFBQWFNLEVBQUU7WUFBQztZQUM3QkMsTUFBTTtnQkFDSkMsVUFBVVY7Z0JBQ1ZDLElBQUlBO1lBQ047UUFDRixLQUNBLE1BQU01QixPQUFPMEIsSUFBSSxDQUFDWSxNQUFNLENBQUM7WUFDdkJGLE1BQU07Z0JBQ0pKLGVBQWVUO2dCQUNmYyxVQUFVVjtnQkFDVkMsSUFBSUE7Z0JBQ0pXLFVBQVU7b0JBQ1JELFFBQVE7d0JBQ05FLGlCQUFpQkMsS0FBS0MsU0FBUyxDQUFDOzRCQUM5QixLQUFLO2dDQUFDO29DQUFDO29DQUFTO2lDQUFROzZCQUFDOzRCQUN6QixLQUFLO2dDQUFDO29DQUFDO29DQUFTO2lDQUFROzZCQUFDOzRCQUN6QixLQUFLO2dDQUFDO29DQUFDO29DQUFTO2lDQUFROzZCQUFDOzRCQUN6QixLQUFLO2dDQUFDO29DQUFDO29DQUFTO2lDQUFROzZCQUFDOzRCQUN6QixLQUFLO2dDQUFDO29DQUFDO29DQUFTO2lDQUFROzZCQUFDOzRCQUN6QixLQUFLO2dDQUFDO29DQUFDO29DQUFTO2lDQUFROzZCQUFDOzRCQUN6QixLQUFLO2dDQUFDO29DQUFDO29DQUFTO2lDQUFROzZCQUFDO3dCQUMzQjt3QkFDQUMsaUJBQWlCO3dCQUNqQkMsVUFBVTt3QkFDVkMsZ0JBQWdCO3dCQUNoQkMsa0JBQWtCO29CQUNwQjtnQkFDRjtZQUNGO1FBQ0Y7UUFFSixrQkFBa0I7UUFDbEIsTUFBTS9DLDJEQUFhQSxDQUFDa0MsT0FBT0UsRUFBRTtRQUU3QixPQUFPMUMsa0ZBQVlBLENBQUN3QixJQUFJLENBQUM7WUFDdkI4QixJQUFJO1lBQ0pyQixNQUFNO2dCQUNKUyxJQUFJRixPQUFPRSxFQUFFO2dCQUNiYSxNQUFNdEIsS0FBS3NCLElBQUk7Z0JBQ2ZDLE9BQU92QixLQUFLdUIsS0FBSztZQUNuQjtRQUNGO0lBRUYsRUFBRSxPQUFPL0IsT0FBTztRQUNkZ0MsUUFBUWhDLEtBQUssQ0FBQyxrQkFBa0JBO1FBRWhDLElBQUlBLGlCQUFpQmlDLE9BQU87WUFDMUIsSUFBSWpDLE1BQU1rQyxPQUFPLENBQUNDLFFBQVEsQ0FBQyx5QkFBeUI7Z0JBQ2xELE9BQU81RCxrRkFBWUEsQ0FBQ3dCLElBQUksQ0FDdEI7b0JBQUVDLE9BQU87Z0JBQStELEdBQ3hFO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1lBQ0EsSUFBSUQsTUFBTWtDLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLHlCQUF5QjtnQkFDbEQsT0FBTzVELGtGQUFZQSxDQUFDd0IsSUFBSSxDQUN0QjtvQkFBRUMsT0FBTztnQkFBbUQsR0FDNUQ7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7UUFDRjtRQUVBLE9BQU8xQixrRkFBWUEsQ0FBQ3dCLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUFpRCxHQUMxRDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BhY2VwbGFubmVyLy4vYXBwL2FwaS9jb25uZWN0L3JvdXRlLnRzP2JlZWQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS9jb25uZWN0L3JvdXRlLnRzXHJcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XHJcblxyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5pbXBvcnQgeyBjYW52YXNCYXNlVXJsU2NoZW1hLCBjYW52YXNUb2tlblNjaGVtYSB9IGZyb20gJ0AvbGliL3ZhbGlkYXRvcnMnXHJcbmltcG9ydCB7IHZlcmlmeUNhbnZhc1Rva2VuIH0gZnJvbSAnQC9saWIvY2FudmFzJ1xyXG5pbXBvcnQgeyBlbmNyeXB0IH0gZnJvbSAnQC9saWIvY3J5cHRvJ1xyXG5pbXBvcnQgeyBzZXRVc2VyQ29va2llIH0gZnJvbSAnQC9saWIvY29va2llcydcclxuXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuLy8gUmF0ZSBsaW1pdGluZyAoc2ltcGxlIGluLW1lbW9yeSBzdG9yZSlcclxuY29uc3QgcmF0ZUxpbWl0ID0gbmV3IE1hcDxzdHJpbmcsIHsgY291bnQ6IG51bWJlcjsgcmVzZXRUaW1lOiBudW1iZXIgfT4oKVxyXG5jb25zdCBSQVRFX0xJTUlUX1dJTkRPVyA9IDYwICogMTAwMCAvLyAxIG1pbnV0ZVxyXG5jb25zdCBSQVRFX0xJTUlUX01BWCA9IDEwIC8vIDEwIHJlcXVlc3RzIHBlciBtaW51dGVcclxuXHJcbmZ1bmN0aW9uIGNoZWNrUmF0ZUxpbWl0KGlwOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpXHJcbiAgY29uc3QgdXNlckxpbWl0ID0gcmF0ZUxpbWl0LmdldChpcClcclxuICBcclxuICBpZiAoIXVzZXJMaW1pdCB8fCBub3cgPiB1c2VyTGltaXQucmVzZXRUaW1lKSB7XHJcbiAgICByYXRlTGltaXQuc2V0KGlwLCB7IGNvdW50OiAxLCByZXNldFRpbWU6IG5vdyArIFJBVEVfTElNSVRfV0lORE9XIH0pXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuICBcclxuICBpZiAodXNlckxpbWl0LmNvdW50ID49IFJBVEVfTElNSVRfTUFYKSB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcbiAgXHJcbiAgdXNlckxpbWl0LmNvdW50KytcclxuICByZXR1cm4gdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpcCA9IHJlcXVlc3QuaXAgfHwgcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJ3Vua25vd24nXHJcbiAgICBcclxuICAgIC8vIENoZWNrIHJhdGUgbGltaXRcclxuICAgIGlmICghY2hlY2tSYXRlTGltaXQoaXApKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MjkgfVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgY29uc3QgeyBiYXNlVXJsLCB0b2tlbiB9ID0gYm9keVxyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dHNcclxuICAgIGNvbnN0IHZhbGlkYXRlZEJhc2VVcmwgPSBjYW52YXNCYXNlVXJsU2NoZW1hLnBhcnNlKGJhc2VVcmwpXHJcbiAgICBjb25zdCB2YWxpZGF0ZWRUb2tlbiA9IGNhbnZhc1Rva2VuU2NoZW1hLnBhcnNlKHRva2VuKVxyXG4gICAgXHJcbiAgICAvLyBWZXJpZnkgdG9rZW4gd2l0aCBDYW52YXNcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlDYW52YXNUb2tlbih2YWxpZGF0ZWRCYXNlVXJsLCB2YWxpZGF0ZWRUb2tlbilcclxuICAgIFxyXG4gICAgLy8gRW5jcnlwdCB0b2tlblxyXG4gICAgY29uc3QgeyBjaXBoZXJ0ZXh0LCBpdiB9ID0gYXdhaXQgZW5jcnlwdCh2YWxpZGF0ZWRUb2tlbilcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSB1c2VyXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZTogeyBjYW52YXNCYXNlVXJsOiB2YWxpZGF0ZWRCYXNlVXJsIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNvbnN0IGRiVXNlciA9IGV4aXN0aW5nVXNlclxyXG4gICAgICA/IGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XHJcbiAgICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdVc2VyLmlkIH0sXHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGVuY1Rva2VuOiBjaXBoZXJ0ZXh0LFxyXG4gICAgICAgICAgICBpdjogaXYsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgOiBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBjYW52YXNCYXNlVXJsOiB2YWxpZGF0ZWRCYXNlVXJsLFxyXG4gICAgICAgICAgICBlbmNUb2tlbjogY2lwaGVydGV4dCxcclxuICAgICAgICAgICAgaXY6IGl2LFxyXG4gICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgIGNyZWF0ZToge1xyXG4gICAgICAgICAgICAgICAgd29ya1dpbmRvd3NKc29uOiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgIFwiMVwiOiBbW1wiMTk6MDBcIiwgXCIyMjowMFwiXV0sIC8vIE1vbmRheVxyXG4gICAgICAgICAgICAgICAgICBcIjJcIjogW1tcIjE5OjAwXCIsIFwiMjI6MDBcIl1dLCAvLyBUdWVzZGF5XHJcbiAgICAgICAgICAgICAgICAgIFwiM1wiOiBbW1wiMTk6MDBcIiwgXCIyMjowMFwiXV0sIC8vIFdlZG5lc2RheVxyXG4gICAgICAgICAgICAgICAgICBcIjRcIjogW1tcIjE5OjAwXCIsIFwiMjI6MDBcIl1dLCAvLyBUaHVyc2RheVxyXG4gICAgICAgICAgICAgICAgICBcIjVcIjogW1tcIjE5OjAwXCIsIFwiMjI6MDBcIl1dLCAvLyBGcmlkYXlcclxuICAgICAgICAgICAgICAgICAgXCI2XCI6IFtbXCIxMDowMFwiLCBcIjE2OjAwXCJdXSwgLy8gU2F0dXJkYXlcclxuICAgICAgICAgICAgICAgICAgXCIwXCI6IFtbXCIxMDowMFwiLCBcIjE2OjAwXCJdXSwgLy8gU3VuZGF5XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIGRhaWx5TWF4TWludXRlczogMTgwLFxyXG4gICAgICAgICAgICAgICAgdGltZXpvbmU6ICdBbWVyaWNhL05ld19Zb3JrJyxcclxuICAgICAgICAgICAgICAgIHVzZUFJRXN0aW1hdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGFpQWdncmVzc2l2ZW5lc3M6IDAsXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICBcclxuICAgIC8vIFNldCB1c2VyIGNvb2tpZVxyXG4gICAgYXdhaXQgc2V0VXNlckNvb2tpZShkYlVzZXIuaWQpXHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICBvazogdHJ1ZSwgXHJcbiAgICAgIHVzZXI6IHtcclxuICAgICAgICBpZDogZGJVc2VyLmlkLFxyXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Nvbm5lY3QgZXJyb3I6JywgZXJyb3IpXHJcbiAgICBcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdJbnZhbGlkIENhbnZhcyB0b2tlbicpKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgQ2FudmFzIHRva2VuLiBQbGVhc2UgY2hlY2sgeW91ciB0b2tlbiBhbmQgdHJ5IGFnYWluLicgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncmVxdWlyZWQgcGVybWlzc2lvbnMnKSkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICdDYW52YXMgdG9rZW4gZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBwZXJtaXNzaW9ucy4nIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gQ2FudmFzLiBQbGVhc2UgdHJ5IGFnYWluLicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJydW50aW1lIiwiTmV4dFJlc3BvbnNlIiwiUHJpc21hQ2xpZW50IiwiY2FudmFzQmFzZVVybFNjaGVtYSIsImNhbnZhc1Rva2VuU2NoZW1hIiwidmVyaWZ5Q2FudmFzVG9rZW4iLCJlbmNyeXB0Iiwic2V0VXNlckNvb2tpZSIsInByaXNtYSIsInJhdGVMaW1pdCIsIk1hcCIsIlJBVEVfTElNSVRfV0lORE9XIiwiUkFURV9MSU1JVF9NQVgiLCJjaGVja1JhdGVMaW1pdCIsImlwIiwibm93IiwiRGF0ZSIsInVzZXJMaW1pdCIsImdldCIsInJlc2V0VGltZSIsInNldCIsImNvdW50IiwiUE9TVCIsInJlcXVlc3QiLCJoZWFkZXJzIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYm9keSIsImJhc2VVcmwiLCJ0b2tlbiIsInZhbGlkYXRlZEJhc2VVcmwiLCJwYXJzZSIsInZhbGlkYXRlZFRva2VuIiwidXNlciIsImNpcGhlcnRleHQiLCJpdiIsImV4aXN0aW5nVXNlciIsImZpbmRGaXJzdCIsIndoZXJlIiwiY2FudmFzQmFzZVVybCIsImRiVXNlciIsInVwZGF0ZSIsImlkIiwiZGF0YSIsImVuY1Rva2VuIiwiY3JlYXRlIiwic2V0dGluZ3MiLCJ3b3JrV2luZG93c0pzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiZGFpbHlNYXhNaW51dGVzIiwidGltZXpvbmUiLCJ1c2VBSUVzdGltYXRlcyIsImFpQWdncmVzc2l2ZW5lc3MiLCJvayIsIm5hbWUiLCJlbWFpbCIsImNvbnNvbGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/connect/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/canvas.ts":
/*!***********************!*\
  !*** ./lib/canvas.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchCanvasJson: () => (/* binding */ fetchCanvasJson),\n/* harmony export */   getAllWithPagination: () => (/* binding */ getAllWithPagination),\n/* harmony export */   getCalendarEvents: () => (/* binding */ getCalendarEvents),\n/* harmony export */   normalizeCanvasBaseUrl: () => (/* binding */ normalizeCanvasBaseUrl),\n/* harmony export */   validateCanvasBaseUrl: () => (/* binding */ validateCanvasBaseUrl),\n/* harmony export */   verifyCanvasToken: () => (/* binding */ verifyCanvasToken)\n/* harmony export */ });\n/**\r\n * Canvas API utilities for PacePlanner\r\n */ /**\r\n * Fetch JSON from Canvas API\r\n */ async function fetchCanvasJson(baseUrl, path, token) {\n    const url = `${baseUrl}/api/v1${path}`;\n    const response = await fetch(url, {\n        headers: {\n            \"Authorization\": `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n        }\n    });\n    if (!response.ok) {\n        if (response.status === 401) {\n            throw new Error(\"Invalid Canvas token\");\n        }\n        if (response.status === 403) {\n            throw new Error(\"Canvas token does not have required permissions\");\n        }\n        throw new Error(`Canvas API error: ${response.status} ${response.statusText}`);\n    }\n    return response.json();\n}\n/**\r\n * Get all pages from a paginated Canvas API endpoint\r\n */ async function getAllWithPagination(baseUrl, path, token) {\n    const allData = [];\n    let nextUrl = `${baseUrl}/api/v1${path}`;\n    while(nextUrl){\n        const response = await fetch(nextUrl, {\n            headers: {\n                \"Authorization\": `Bearer ${token}`,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        if (!response.ok) {\n            if (response.status === 401) {\n                throw new Error(\"Invalid Canvas token\");\n            }\n            if (response.status === 403) {\n                throw new Error(\"Canvas token does not have required permissions\");\n            }\n            throw new Error(`Canvas API error: ${response.status} ${response.statusText}`);\n        }\n        const data = await response.json();\n        allData.push(...Array.isArray(data) ? data : []);\n        // Check for next page in Link header\n        const linkHeader = response.headers.get(\"Link\");\n        nextUrl = null;\n        if (linkHeader) {\n            const links = linkHeader.split(\",\").map((link)=>{\n                const [url, rel] = link.split(\";\").map((s)=>s.trim());\n                return {\n                    url: url.slice(1, -1),\n                    rel: rel.slice(5, -1)\n                };\n            });\n            const nextLink = links.find((link)=>link.rel === \"next\");\n            if (nextLink) {\n                nextUrl = nextLink.url;\n            }\n        }\n    }\n    return allData;\n}\n/**\r\n * Verify Canvas token by fetching user info\r\n */ async function verifyCanvasToken(baseUrl, token) {\n    return fetchCanvasJson(baseUrl, \"/users/self\", token);\n}\n/**\r\n * Get calendar events (assignments) for a date range\r\n */ async function getCalendarEvents(baseUrl, token, startDate, endDate) {\n    const path = `/users/self/calendar_events?type=assignment&all_events=true&start_date=${startDate}&end_date=${endDate}`;\n    return getAllWithPagination(baseUrl, path, token);\n}\n/**\r\n * Validate Canvas base URL\r\n */ function validateCanvasBaseUrl(url) {\n    try {\n        const parsed = new URL(url);\n        return parsed.hostname.endsWith(\".instructure.com\");\n    } catch  {\n        return false;\n    }\n}\n/**\r\n * Normalize Canvas base URL\r\n */ function normalizeCanvasBaseUrl(url) {\n    const parsed = new URL(url);\n    return `${parsed.protocol}//${parsed.hostname}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFFZixNQUFNakMsT0FBTyxDQUFDLHVFQUF1RSxFQUFFZ0MsVUFBVSxVQUFVLEVBQUVDLFFBQVEsQ0FBQztJQUN0SCxPQUFPdEIscUJBQTBDWixTQUFTQyxNQUFNQztBQUNsRTtBQUVBOztDQUVDLEdBQ00sU0FBU2lDLHNCQUFzQmhDLEdBQVc7SUFDL0MsSUFBSTtRQUNGLE1BQU1pQyxTQUFTLElBQUlDLElBQUlsQztRQUN2QixPQUFPaUMsT0FBT0UsUUFBUSxDQUFDQyxRQUFRLENBQUM7SUFDbEMsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLHVCQUF1QnJDLEdBQVc7SUFDaEQsTUFBTWlDLFNBQVMsSUFBSUMsSUFBSWxDO0lBQ3ZCLE9BQU8sQ0FBQyxFQUFFaUMsT0FBT0ssUUFBUSxDQUFDLEVBQUUsRUFBRUwsT0FBT0UsUUFBUSxDQUFDLENBQUM7QUFDakQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYWNlcGxhbm5lci8uL2xpYi9jYW52YXMudHM/MTYyMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ2FudmFzIEFQSSB1dGlsaXRpZXMgZm9yIFBhY2VQbGFubmVyXHJcbiAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYW52YXNVc2VyIHtcclxuICBpZDogbnVtYmVyXHJcbiAgbmFtZTogc3RyaW5nXHJcbiAgZW1haWw6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhbnZhc0NhbGVuZGFyRXZlbnQge1xyXG4gIGlkOiBudW1iZXJcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgc3RhcnRfYXQ6IHN0cmluZ1xyXG4gIGVuZF9hdDogc3RyaW5nIHwgbnVsbFxyXG4gIGR1ZV9hdDogc3RyaW5nIHwgbnVsbFxyXG4gIGFsbF9kYXk6IGJvb2xlYW5cclxuICBhbGxfZGF5X2RhdGU6IHN0cmluZyB8IG51bGxcclxuICBjcmVhdGVkX2F0OiBzdHJpbmdcclxuICB1cGRhdGVkX2F0OiBzdHJpbmdcclxuICBsb2NhdGlvbl9uYW1lOiBzdHJpbmcgfCBudWxsXHJcbiAgbG9jYXRpb25fYWRkcmVzczogc3RyaW5nIHwgbnVsbFxyXG4gIGNvbnRleHRfY29kZTogc3RyaW5nXHJcbiAgZWZmZWN0aXZlX2NvbnRleHRfY29kZTogc3RyaW5nXHJcbiAgY29udGV4dF9uYW1lOiBzdHJpbmdcclxuICBhbGxfY29udGV4dF9jb2Rlczogc3RyaW5nXHJcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGxcclxuICBodG1sX3VybDogc3RyaW5nXHJcbiAgdXJsOiBzdHJpbmdcclxuICB0eXBlOiBzdHJpbmdcclxuICBhc3NpZ25tZW50Pzoge1xyXG4gICAgaWQ6IG51bWJlclxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbFxyXG4gICAgZHVlX2F0OiBzdHJpbmcgfCBudWxsXHJcbiAgICBwb2ludHNfcG9zc2libGU6IG51bWJlciB8IG51bGxcclxuICAgIGdyYWRpbmdfdHlwZTogc3RyaW5nXHJcbiAgICBhc3NpZ25tZW50X2dyb3VwX2lkOiBudW1iZXJcclxuICAgIHBvc2l0aW9uOiBudW1iZXJcclxuICAgIGNvdXJzZV9pZDogbnVtYmVyXHJcbiAgICBodG1sX3VybDogc3RyaW5nXHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYW52YXNQYWdpbmF0ZWRSZXNwb25zZTxUPiB7XHJcbiAgZGF0YTogVFtdXHJcbiAgbmV4dD86IHN0cmluZ1xyXG4gIHByZXY/OiBzdHJpbmdcclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIEpTT04gZnJvbSBDYW52YXMgQVBJXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hDYW52YXNKc29uPFQ+KFxyXG4gIGJhc2VVcmw6IHN0cmluZyxcclxuICBwYXRoOiBzdHJpbmcsXHJcbiAgdG9rZW46IHN0cmluZ1xyXG4pOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCB1cmwgPSBgJHtiYXNlVXJsfS9hcGkvdjEke3BhdGh9YFxyXG4gIFxyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXHJcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICB9LFxyXG4gIH0pXHJcblxyXG4gIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQ2FudmFzIHRva2VuJylcclxuICAgIH1cclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbnZhcyB0b2tlbiBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIHBlcm1pc3Npb25zJylcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcihgQ2FudmFzIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IGFsbCBwYWdlcyBmcm9tIGEgcGFnaW5hdGVkIENhbnZhcyBBUEkgZW5kcG9pbnRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxXaXRoUGFnaW5hdGlvbjxUPihcclxuICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgcGF0aDogc3RyaW5nLFxyXG4gIHRva2VuOiBzdHJpbmdcclxuKTogUHJvbWlzZTxUW10+IHtcclxuICBjb25zdCBhbGxEYXRhOiBUW10gPSBbXVxyXG4gIGxldCBuZXh0VXJsOiBzdHJpbmcgfCBudWxsID0gYCR7YmFzZVVybH0vYXBpL3YxJHtwYXRofWBcclxuXHJcbiAgd2hpbGUgKG5leHRVcmwpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKG5leHRVcmwsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQ2FudmFzIHRva2VuJylcclxuICAgICAgfVxyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbnZhcyB0b2tlbiBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIHBlcm1pc3Npb25zJylcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbnZhcyBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICBhbGxEYXRhLnB1c2goLi4uKEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW10pKVxyXG5cclxuICAgIC8vIENoZWNrIGZvciBuZXh0IHBhZ2UgaW4gTGluayBoZWFkZXJcclxuICAgIGNvbnN0IGxpbmtIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnTGluaycpXHJcbiAgICBuZXh0VXJsID0gbnVsbFxyXG5cclxuICAgIGlmIChsaW5rSGVhZGVyKSB7XHJcbiAgICAgIGNvbnN0IGxpbmtzID0gbGlua0hlYWRlci5zcGxpdCgnLCcpLm1hcChsaW5rID0+IHtcclxuICAgICAgICBjb25zdCBbdXJsLCByZWxdID0gbGluay5zcGxpdCgnOycpLm1hcChzID0+IHMudHJpbSgpKVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB1cmw6IHVybC5zbGljZSgxLCAtMSksIC8vIFJlbW92ZSA8IGFuZCA+XHJcbiAgICAgICAgICByZWw6IHJlbC5zbGljZSg1LCAtMSksIC8vIFJlbW92ZSByZWw9XCIgYW5kIFwiXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc3QgbmV4dExpbmsgPSBsaW5rcy5maW5kKGxpbmsgPT4gbGluay5yZWwgPT09ICduZXh0JylcclxuICAgICAgaWYgKG5leHRMaW5rKSB7XHJcbiAgICAgICAgbmV4dFVybCA9IG5leHRMaW5rLnVybFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gYWxsRGF0YVxyXG59XHJcblxyXG4vKipcclxuICogVmVyaWZ5IENhbnZhcyB0b2tlbiBieSBmZXRjaGluZyB1c2VyIGluZm9cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlDYW52YXNUb2tlbihcclxuICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgdG9rZW46IHN0cmluZ1xyXG4pOiBQcm9taXNlPENhbnZhc1VzZXI+IHtcclxuICByZXR1cm4gZmV0Y2hDYW52YXNKc29uPENhbnZhc1VzZXI+KGJhc2VVcmwsICcvdXNlcnMvc2VsZicsIHRva2VuKVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IGNhbGVuZGFyIGV2ZW50cyAoYXNzaWdubWVudHMpIGZvciBhIGRhdGUgcmFuZ2VcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYWxlbmRhckV2ZW50cyhcclxuICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgdG9rZW46IHN0cmluZyxcclxuICBzdGFydERhdGU6IHN0cmluZyxcclxuICBlbmREYXRlOiBzdHJpbmdcclxuKTogUHJvbWlzZTxDYW52YXNDYWxlbmRhckV2ZW50W10+IHtcclxuICBjb25zdCBwYXRoID0gYC91c2Vycy9zZWxmL2NhbGVuZGFyX2V2ZW50cz90eXBlPWFzc2lnbm1lbnQmYWxsX2V2ZW50cz10cnVlJnN0YXJ0X2RhdGU9JHtzdGFydERhdGV9JmVuZF9kYXRlPSR7ZW5kRGF0ZX1gXHJcbiAgcmV0dXJuIGdldEFsbFdpdGhQYWdpbmF0aW9uPENhbnZhc0NhbGVuZGFyRXZlbnQ+KGJhc2VVcmwsIHBhdGgsIHRva2VuKVxyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgQ2FudmFzIGJhc2UgVVJMXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDYW52YXNCYXNlVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBVUkwodXJsKVxyXG4gICAgcmV0dXJuIHBhcnNlZC5ob3N0bmFtZS5lbmRzV2l0aCgnLmluc3RydWN0dXJlLmNvbScpXHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBOb3JtYWxpemUgQ2FudmFzIGJhc2UgVVJMXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplQ2FudmFzQmFzZVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpXHJcbiAgcmV0dXJuIGAke3BhcnNlZC5wcm90b2NvbH0vLyR7cGFyc2VkLmhvc3RuYW1lfWBcclxufVxyXG4iXSwibmFtZXMiOlsiZmV0Y2hDYW52YXNKc29uIiwiYmFzZVVybCIsInBhdGgiLCJ0b2tlbiIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJzdGF0dXMiLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwiZ2V0QWxsV2l0aFBhZ2luYXRpb24iLCJhbGxEYXRhIiwibmV4dFVybCIsImRhdGEiLCJwdXNoIiwiQXJyYXkiLCJpc0FycmF5IiwibGlua0hlYWRlciIsImdldCIsImxpbmtzIiwic3BsaXQiLCJtYXAiLCJsaW5rIiwicmVsIiwicyIsInRyaW0iLCJzbGljZSIsIm5leHRMaW5rIiwiZmluZCIsInZlcmlmeUNhbnZhc1Rva2VuIiwiZ2V0Q2FsZW5kYXJFdmVudHMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwidmFsaWRhdGVDYW52YXNCYXNlVXJsIiwicGFyc2VkIiwiVVJMIiwiaG9zdG5hbWUiLCJlbmRzV2l0aCIsIm5vcm1hbGl6ZUNhbnZhc0Jhc2VVcmwiLCJwcm90b2NvbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/canvas.ts\n");

/***/ }),

/***/ "(rsc)/./lib/cookies.ts":
/*!************************!*\
  !*** ./lib/cookies.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearUserCookie: () => (/* binding */ clearUserCookie),\n/* harmony export */   getUserIdFromCookie: () => (/* binding */ getUserIdFromCookie),\n/* harmony export */   setUserCookie: () => (/* binding */ setUserCookie)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/headers.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key-change-in-production\";\nconst secret = new TextEncoder().encode(JWT_SECRET);\n/**\r\n * Create a signed cookie with user ID\r\n */ async function setUserCookie(userId) {\n    const token = await new jose__WEBPACK_IMPORTED_MODULE_1__.SignJWT({\n        userId\n    }).setProtectedHeader({\n        alg: \"HS256\"\n    }).setIssuedAt().setExpirationTime(\"30d\").sign(secret);\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    cookieStore.set(\"user-session\", token, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        maxAge: 30 * 24 * 60 * 60\n    });\n}\n/**\r\n * Get user ID from signed cookie\r\n */ async function getUserIdFromCookie() {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const token = cookieStore.get(\"user-session\")?.value;\n        if (!token) {\n            return null;\n        }\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_2__.jwtVerify)(token, secret);\n        return payload.userId;\n    } catch (error) {\n        console.error(\"Error verifying user cookie:\", error);\n        return null;\n    }\n}\n/**\r\n * Clear user cookie\r\n */ async function clearUserCookie() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    cookieStore.delete(\"user-session\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29va2llcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNDO0FBQ0c7QUFFekMsTUFBTUcsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFDN0MsTUFBTUcsU0FBUyxJQUFJQyxjQUFjQyxNQUFNLENBQUNMO0FBRXhDOztDQUVDLEdBQ00sZUFBZU0sY0FBY0MsTUFBYztJQUNoRCxNQUFNQyxRQUFRLE1BQU0sSUFBSVYseUNBQU9BLENBQUM7UUFBRVM7SUFBTyxHQUN0Q0Usa0JBQWtCLENBQUM7UUFBRUMsS0FBSztJQUFRLEdBQ2xDQyxXQUFXLEdBQ1hDLGlCQUFpQixDQUFDLE9BQ2xCQyxJQUFJLENBQUNWO0lBRVIsTUFBTVcsY0FBYyxNQUFNakIscURBQU9BO0lBQ2pDaUIsWUFBWUMsR0FBRyxDQUFDLGdCQUFnQlAsT0FBTztRQUNyQ1EsVUFBVTtRQUNWQyxRQUFRaEIsa0JBQXlCO1FBQ2pDaUIsVUFBVTtRQUNWQyxRQUFRLEtBQUssS0FBSyxLQUFLO0lBQ3pCO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVDO0lBQ3BCLElBQUk7UUFDRixNQUFNTixjQUFjLE1BQU1qQixxREFBT0E7UUFDakMsTUFBTVcsUUFBUU0sWUFBWU8sR0FBRyxDQUFDLGlCQUFpQkM7UUFFL0MsSUFBSSxDQUFDZCxPQUFPO1lBQ1YsT0FBTztRQUNUO1FBRUEsTUFBTSxFQUFFZSxPQUFPLEVBQUUsR0FBRyxNQUFNeEIsK0NBQVNBLENBQUNTLE9BQU9MO1FBQzNDLE9BQU9vQixRQUFRaEIsTUFBTTtJQUN2QixFQUFFLE9BQU9pQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU87SUFDVDtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlRTtJQUNwQixNQUFNWixjQUFjLE1BQU1qQixxREFBT0E7SUFDakNpQixZQUFZYSxNQUFNLENBQUM7QUFDckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYWNlcGxhbm5lci8uL2xpYi9jb29raWVzLnRzPzZjNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcclxuaW1wb3J0IHsgU2lnbkpXVCwgand0VmVyaWZ5IH0gZnJvbSAnam9zZSdcclxuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd5b3VyLXNlY3JldC1rZXktY2hhbmdlLWluLXByb2R1Y3Rpb24nXHJcbmNvbnN0IHNlY3JldCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKV1RfU0VDUkVUKVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIHNpZ25lZCBjb29raWUgd2l0aCB1c2VyIElEXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0VXNlckNvb2tpZSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHRva2VuID0gYXdhaXQgbmV3IFNpZ25KV1QoeyB1c2VySWQgfSlcclxuICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6ICdIUzI1NicgfSlcclxuICAgIC5zZXRJc3N1ZWRBdCgpXHJcbiAgICAuc2V0RXhwaXJhdGlvblRpbWUoJzMwZCcpXHJcbiAgICAuc2lnbihzZWNyZXQpXHJcblxyXG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXHJcbiAgY29va2llU3RvcmUuc2V0KCd1c2VyLXNlc3Npb24nLCB0b2tlbiwge1xyXG4gICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICBzYW1lU2l0ZTogJ2xheCcsXHJcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1c2VyIElEIGZyb20gc2lnbmVkIGNvb2tpZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJJZEZyb21Db29raWUoKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXHJcbiAgICBjb25zdCB0b2tlbiA9IGNvb2tpZVN0b3JlLmdldCgndXNlci1zZXNzaW9uJyk/LnZhbHVlXHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBzZWNyZXQpXHJcbiAgICByZXR1cm4gcGF5bG9hZC51c2VySWQgYXMgc3RyaW5nXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyB1c2VyIGNvb2tpZTonLCBlcnJvcilcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgdXNlciBjb29raWVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhclVzZXJDb29raWUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcclxuICBjb29raWVTdG9yZS5kZWxldGUoJ3VzZXItc2Vzc2lvbicpXHJcbn1cclxuIl0sIm5hbWVzIjpbImNvb2tpZXMiLCJTaWduSldUIiwiand0VmVyaWZ5IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJzZWNyZXQiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsInNldFVzZXJDb29raWUiLCJ1c2VySWQiLCJ0b2tlbiIsInNldFByb3RlY3RlZEhlYWRlciIsImFsZyIsInNldElzc3VlZEF0Iiwic2V0RXhwaXJhdGlvblRpbWUiLCJzaWduIiwiY29va2llU3RvcmUiLCJzZXQiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwibWF4QWdlIiwiZ2V0VXNlcklkRnJvbUNvb2tpZSIsImdldCIsInZhbHVlIiwicGF5bG9hZCIsImVycm9yIiwiY29uc29sZSIsImNsZWFyVXNlckNvb2tpZSIsImRlbGV0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/cookies.ts\n");

/***/ }),

/***/ "(rsc)/./lib/crypto.ts":
/*!***********************!*\
  !*** ./lib/crypto.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt),\n/* harmony export */   generateEncryptionKey: () => (/* binding */ generateEncryptionKey)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ALGORITHM = \"AES-GCM\";\nconst KEY_LENGTH = 256;\nconst IV_LENGTH = 12;\n/**\r\n * Get the encryption key from environment variable\r\n */ async function getEncryptionKey() {\n    const keyString = process.env.CANVAS_ENCRYPTION_KEY;\n    if (!keyString) {\n        throw new Error(\"CANVAS_ENCRYPTION_KEY environment variable is required\");\n    }\n    // Remove 'base64:' prefix if present\n    const base64Key = keyString.startsWith(\"base64:\") ? keyString.slice(7) : keyString;\n    // Decode base64 key\n    const keyBuffer = Buffer.from(base64Key, \"base64\");\n    if (keyBuffer.length !== 32) {\n        throw new Error(\"CANVAS_ENCRYPTION_KEY must be a 32-byte base64-encoded key\");\n    }\n    return await crypto__WEBPACK_IMPORTED_MODULE_0__.webcrypto.subtle.importKey(\"raw\", keyBuffer, {\n        name: ALGORITHM\n    }, false, [\n        \"encrypt\",\n        \"decrypt\"\n    ]);\n}\n/**\r\n * Encrypt a string using AES-GCM\r\n */ async function encrypt(plaintext) {\n    const key = await getEncryptionKey();\n    const iv = crypto__WEBPACK_IMPORTED_MODULE_0__.webcrypto.getRandomValues(new Uint8Array(IV_LENGTH));\n    const encoded = new TextEncoder().encode(plaintext);\n    const ciphertext = await crypto__WEBPACK_IMPORTED_MODULE_0__.webcrypto.subtle.encrypt({\n        name: ALGORITHM,\n        iv: iv\n    }, key, encoded);\n    return {\n        ciphertext: Buffer.from(ciphertext).toString(\"base64\"),\n        iv: Buffer.from(iv).toString(\"base64\")\n    };\n}\n/**\r\n * Decrypt a string using AES-GCM\r\n */ async function decrypt(ciphertext, iv) {\n    const key = await getEncryptionKey();\n    const ciphertextBuffer = Buffer.from(ciphertext, \"base64\");\n    const ivBuffer = Buffer.from(iv, \"base64\");\n    const decrypted = await crypto__WEBPACK_IMPORTED_MODULE_0__.webcrypto.subtle.decrypt({\n        name: ALGORITHM,\n        iv: ivBuffer\n    }, key, ciphertextBuffer);\n    return new TextDecoder().decode(decrypted);\n}\n/**\r\n * Generate a random encryption key (for setup)\r\n */ function generateEncryptionKey() {\n    const key = crypto__WEBPACK_IMPORTED_MODULE_0__.webcrypto.getRandomValues(new Uint8Array(32));\n    return \"base64:\" + Buffer.from(key).toString(\"base64\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY3J5cHRvLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtDO0FBRWxDLE1BQU1DLFlBQVk7QUFDbEIsTUFBTUMsYUFBYTtBQUNuQixNQUFNQyxZQUFZO0FBRWxCOztDQUVDLEdBQ0QsZUFBZUM7SUFDYixNQUFNQyxZQUFZQyxRQUFRQyxHQUFHLENBQUNDLHFCQUFxQjtJQUNuRCxJQUFJLENBQUNILFdBQVc7UUFDZCxNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFFQSxxQ0FBcUM7SUFDckMsTUFBTUMsWUFBWUwsVUFBVU0sVUFBVSxDQUFDLGFBQWFOLFVBQVVPLEtBQUssQ0FBQyxLQUFLUDtJQUV6RSxvQkFBb0I7SUFDcEIsTUFBTVEsWUFBWUMsT0FBT0MsSUFBSSxDQUFDTCxXQUFXO0lBRXpDLElBQUlHLFVBQVVHLE1BQU0sS0FBSyxJQUFJO1FBQzNCLE1BQU0sSUFBSVAsTUFBTTtJQUNsQjtJQUVBLE9BQU8sTUFBTVQsNkNBQVNBLENBQUNpQixNQUFNLENBQUNDLFNBQVMsQ0FDckMsT0FDQUwsV0FDQTtRQUFFTSxNQUFNbEI7SUFBVSxHQUNsQixPQUNBO1FBQUM7UUFBVztLQUFVO0FBRTFCO0FBRUE7O0NBRUMsR0FDTSxlQUFlbUIsUUFBUUMsU0FBaUI7SUFDN0MsTUFBTUMsTUFBTSxNQUFNbEI7SUFDbEIsTUFBTW1CLEtBQUt2Qiw2Q0FBU0EsQ0FBQ3dCLGVBQWUsQ0FBQyxJQUFJQyxXQUFXdEI7SUFFcEQsTUFBTXVCLFVBQVUsSUFBSUMsY0FBY0MsTUFBTSxDQUFDUDtJQUN6QyxNQUFNUSxhQUFhLE1BQU03Qiw2Q0FBU0EsQ0FBQ2lCLE1BQU0sQ0FBQ0csT0FBTyxDQUMvQztRQUNFRCxNQUFNbEI7UUFDTnNCLElBQUlBO0lBQ04sR0FDQUQsS0FDQUk7SUFHRixPQUFPO1FBQ0xHLFlBQVlmLE9BQU9DLElBQUksQ0FBQ2MsWUFBWUMsUUFBUSxDQUFDO1FBQzdDUCxJQUFJVCxPQUFPQyxJQUFJLENBQUNRLElBQUlPLFFBQVEsQ0FBQztJQUMvQjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxRQUFRRixVQUFrQixFQUFFTixFQUFVO0lBQzFELE1BQU1ELE1BQU0sTUFBTWxCO0lBRWxCLE1BQU00QixtQkFBbUJsQixPQUFPQyxJQUFJLENBQUNjLFlBQVk7SUFDakQsTUFBTUksV0FBV25CLE9BQU9DLElBQUksQ0FBQ1EsSUFBSTtJQUVqQyxNQUFNVyxZQUFZLE1BQU1sQyw2Q0FBU0EsQ0FBQ2lCLE1BQU0sQ0FBQ2MsT0FBTyxDQUM5QztRQUNFWixNQUFNbEI7UUFDTnNCLElBQUlVO0lBQ04sR0FDQVgsS0FDQVU7SUFHRixPQUFPLElBQUlHLGNBQWNDLE1BQU0sQ0FBQ0Y7QUFDbEM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNHO0lBQ2QsTUFBTWYsTUFBTXRCLDZDQUFTQSxDQUFDd0IsZUFBZSxDQUFDLElBQUlDLFdBQVc7SUFDckQsT0FBTyxZQUFZWCxPQUFPQyxJQUFJLENBQUNPLEtBQUtRLFFBQVEsQ0FBQztBQUMvQyIsInNvdXJjZXMiOlsid2VicGFjazovL3BhY2VwbGFubmVyLy4vbGliL2NyeXB0by50cz85MjVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHdlYmNyeXB0byB9IGZyb20gJ2NyeXB0bydcclxuXHJcbmNvbnN0IEFMR09SSVRITSA9ICdBRVMtR0NNJ1xyXG5jb25zdCBLRVlfTEVOR1RIID0gMjU2XHJcbmNvbnN0IElWX0xFTkdUSCA9IDEyXHJcblxyXG4vKipcclxuICogR2V0IHRoZSBlbmNyeXB0aW9uIGtleSBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRFbmNyeXB0aW9uS2V5KCk6IFByb21pc2U8Q3J5cHRvS2V5PiB7XHJcbiAgY29uc3Qga2V5U3RyaW5nID0gcHJvY2Vzcy5lbnYuQ0FOVkFTX0VOQ1JZUFRJT05fS0VZXHJcbiAgaWYgKCFrZXlTdHJpbmcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQ0FOVkFTX0VOQ1JZUFRJT05fS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJylcclxuICB9XHJcblxyXG4gIC8vIFJlbW92ZSAnYmFzZTY0OicgcHJlZml4IGlmIHByZXNlbnRcclxuICBjb25zdCBiYXNlNjRLZXkgPSBrZXlTdHJpbmcuc3RhcnRzV2l0aCgnYmFzZTY0OicpID8ga2V5U3RyaW5nLnNsaWNlKDcpIDoga2V5U3RyaW5nXHJcbiAgXHJcbiAgLy8gRGVjb2RlIGJhc2U2NCBrZXlcclxuICBjb25zdCBrZXlCdWZmZXIgPSBCdWZmZXIuZnJvbShiYXNlNjRLZXksICdiYXNlNjQnKVxyXG4gIFxyXG4gIGlmIChrZXlCdWZmZXIubGVuZ3RoICE9PSAzMikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdDQU5WQVNfRU5DUllQVElPTl9LRVkgbXVzdCBiZSBhIDMyLWJ5dGUgYmFzZTY0LWVuY29kZWQga2V5JylcclxuICB9XHJcblxyXG4gIHJldHVybiBhd2FpdCB3ZWJjcnlwdG8uc3VidGxlLmltcG9ydEtleShcclxuICAgICdyYXcnLFxyXG4gICAga2V5QnVmZmVyLFxyXG4gICAgeyBuYW1lOiBBTEdPUklUSE0gfSxcclxuICAgIGZhbHNlLFxyXG4gICAgWydlbmNyeXB0JywgJ2RlY3J5cHQnXVxyXG4gIClcclxufVxyXG5cclxuLyoqXHJcbiAqIEVuY3J5cHQgYSBzdHJpbmcgdXNpbmcgQUVTLUdDTVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuY3J5cHQocGxhaW50ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHsgY2lwaGVydGV4dDogc3RyaW5nOyBpdjogc3RyaW5nIH0+IHtcclxuICBjb25zdCBrZXkgPSBhd2FpdCBnZXRFbmNyeXB0aW9uS2V5KClcclxuICBjb25zdCBpdiA9IHdlYmNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoSVZfTEVOR1RIKSlcclxuICBcclxuICBjb25zdCBlbmNvZGVkID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHBsYWludGV4dClcclxuICBjb25zdCBjaXBoZXJ0ZXh0ID0gYXdhaXQgd2ViY3J5cHRvLnN1YnRsZS5lbmNyeXB0KFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBBTEdPUklUSE0sXHJcbiAgICAgIGl2OiBpdixcclxuICAgIH0sXHJcbiAgICBrZXksXHJcbiAgICBlbmNvZGVkXHJcbiAgKVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY2lwaGVydGV4dDogQnVmZmVyLmZyb20oY2lwaGVydGV4dCkudG9TdHJpbmcoJ2Jhc2U2NCcpLFxyXG4gICAgaXY6IEJ1ZmZlci5mcm9tKGl2KS50b1N0cmluZygnYmFzZTY0JyksXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRGVjcnlwdCBhIHN0cmluZyB1c2luZyBBRVMtR0NNXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjcnlwdChjaXBoZXJ0ZXh0OiBzdHJpbmcsIGl2OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIGNvbnN0IGtleSA9IGF3YWl0IGdldEVuY3J5cHRpb25LZXkoKVxyXG4gIFxyXG4gIGNvbnN0IGNpcGhlcnRleHRCdWZmZXIgPSBCdWZmZXIuZnJvbShjaXBoZXJ0ZXh0LCAnYmFzZTY0JylcclxuICBjb25zdCBpdkJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGl2LCAnYmFzZTY0JylcclxuICBcclxuICBjb25zdCBkZWNyeXB0ZWQgPSBhd2FpdCB3ZWJjcnlwdG8uc3VidGxlLmRlY3J5cHQoXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IEFMR09SSVRITSxcclxuICAgICAgaXY6IGl2QnVmZmVyLFxyXG4gICAgfSxcclxuICAgIGtleSxcclxuICAgIGNpcGhlcnRleHRCdWZmZXJcclxuICApXHJcblxyXG4gIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGVjcnlwdGVkKVxyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgYSByYW5kb20gZW5jcnlwdGlvbiBrZXkgKGZvciBzZXR1cClcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUVuY3J5cHRpb25LZXkoKTogc3RyaW5nIHtcclxuICBjb25zdCBrZXkgPSB3ZWJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDMyKSlcclxuICByZXR1cm4gJ2Jhc2U2NDonICsgQnVmZmVyLmZyb20oa2V5KS50b1N0cmluZygnYmFzZTY0JylcclxufVxyXG4iXSwibmFtZXMiOlsid2ViY3J5cHRvIiwiQUxHT1JJVEhNIiwiS0VZX0xFTkdUSCIsIklWX0xFTkdUSCIsImdldEVuY3J5cHRpb25LZXkiLCJrZXlTdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiQ0FOVkFTX0VOQ1JZUFRJT05fS0VZIiwiRXJyb3IiLCJiYXNlNjRLZXkiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJrZXlCdWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwibGVuZ3RoIiwic3VidGxlIiwiaW1wb3J0S2V5IiwibmFtZSIsImVuY3J5cHQiLCJwbGFpbnRleHQiLCJrZXkiLCJpdiIsImdldFJhbmRvbVZhbHVlcyIsIlVpbnQ4QXJyYXkiLCJlbmNvZGVkIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJjaXBoZXJ0ZXh0IiwidG9TdHJpbmciLCJkZWNyeXB0IiwiY2lwaGVydGV4dEJ1ZmZlciIsIml2QnVmZmVyIiwiZGVjcnlwdGVkIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJnZW5lcmF0ZUVuY3J5cHRpb25LZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/crypto.ts\n");

/***/ }),

/***/ "(rsc)/./lib/validators.ts":
/*!***************************!*\
  !*** ./lib/validators.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assignmentStatusSchema: () => (/* binding */ assignmentStatusSchema),\n/* harmony export */   assignmentStrategySchema: () => (/* binding */ assignmentStrategySchema),\n/* harmony export */   canvasBaseUrlSchema: () => (/* binding */ canvasBaseUrlSchema),\n/* harmony export */   canvasTokenSchema: () => (/* binding */ canvasTokenSchema),\n/* harmony export */   userSettingsSchema: () => (/* binding */ userSettingsSchema),\n/* harmony export */   workWindowsSchema: () => (/* binding */ workWindowsSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst canvasBaseUrlSchema = zod__WEBPACK_IMPORTED_MODULE_0__.string().transform((s)=>s.trim()).pipe(zod__WEBPACK_IMPORTED_MODULE_0__.string().url(\"Must be a valid URL\")).refine((url)=>{\n    try {\n        const p = new URL(url);\n        return p.hostname.endsWith(\".instructure.com\");\n    } catch  {\n        return false;\n    }\n}, \"Must be a Canvas instance URL (ending with .instructure.com)\").transform((url)=>{\n    const p = new URL(url);\n    return `${p.protocol}//${p.hostname}`;\n});\nconst canvasTokenSchema = zod__WEBPACK_IMPORTED_MODULE_0__.string().transform((s)=>s.trim()).pipe(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(20, \"Token looks too short\").max(1000, \"Token is too long\"));\n// User settings validation\nconst userSettingsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    workWindowsJson: zod__WEBPACK_IMPORTED_MODULE_0__.string().refine((json)=>{\n        try {\n            const parsed = JSON.parse(json);\n            return typeof parsed === \"object\" && parsed !== null;\n        } catch  {\n            return false;\n        }\n    }, \"Invalid work windows format\"),\n    dailyMaxMinutes: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(1).max(1440),\n    timezone: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    useAIEstimates: zod__WEBPACK_IMPORTED_MODULE_0__.boolean(),\n    aiAggressiveness: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(-2).max(2)\n});\n// Assignment strategy validation\nconst assignmentStrategySchema = zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n    \"even\",\n    \"frontload\",\n    \"backload\",\n    \"custom\"\n]);\n// Assignment status validation\nconst assignmentStatusSchema = zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n    \"planned\",\n    \"in_progress\",\n    \"done\"\n]);\n// Work window format: { \"1\": [[\"19:00\", \"22:00\"]], \"2\": [[\"09:00\", \"12:00\"], [\"14:00\", \"17:00\"]] }\nconst workWindowsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.string(), zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.tuple([\n    zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.string()\n])) // array of [start, end] time pairs\n);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdmFsaWRhdG9ycy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdCO0FBRWpCLE1BQU1DLHNCQUFzQkQsdUNBQzFCLEdBQ05HLFNBQVMsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLElBQ3ZCQyxJQUFJLENBQUNOLHVDQUFRLEdBQUdPLEdBQUcsQ0FBQyx3QkFDcEJDLE1BQU0sQ0FBQyxDQUFDRDtJQUNQLElBQUk7UUFDRixNQUFNRSxJQUFJLElBQUlDLElBQUlIO1FBQ2xCLE9BQU9FLEVBQUVFLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDO0lBQzdCLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGLEdBQUcsZ0VBQ0ZULFNBQVMsQ0FBQyxDQUFDSTtJQUNWLE1BQU1FLElBQUksSUFBSUMsSUFBSUg7SUFDbEIsT0FBTyxDQUFDLEVBQUVFLEVBQUVJLFFBQVEsQ0FBQyxFQUFFLEVBQUVKLEVBQUVFLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZDLEdBQUc7QUFFRSxNQUFNRyxvQkFBb0JkLHVDQUN4QixHQUNORyxTQUFTLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsSUFBSSxJQUN2QkMsSUFBSSxDQUFDTix1Q0FBUSxHQUFHZSxHQUFHLENBQUMsSUFBSSx5QkFBeUJDLEdBQUcsQ0FBQyxNQUFNLHNCQUFzQjtBQUdwRiwyQkFBMkI7QUFDcEIsTUFBTUMscUJBQXFCakIsdUNBQVEsQ0FBQztJQUN6Q21CLGlCQUFpQm5CLHVDQUFRLEdBQUdRLE1BQU0sQ0FDaEMsQ0FBQ1k7UUFDQyxJQUFJO1lBQ0YsTUFBTUMsU0FBU0MsS0FBS0MsS0FBSyxDQUFDSDtZQUMxQixPQUFPLE9BQU9DLFdBQVcsWUFBWUEsV0FBVztRQUNsRCxFQUFFLE9BQU07WUFDTixPQUFPO1FBQ1Q7SUFDRixHQUNBO0lBRUZHLGlCQUFpQnhCLHVDQUFRLEdBQUcwQixHQUFHLEdBQUdYLEdBQUcsQ0FBQyxHQUFHQyxHQUFHLENBQUM7SUFDN0NXLFVBQVUzQix1Q0FBUSxHQUFHZSxHQUFHLENBQUM7SUFDekJhLGdCQUFnQjVCLHdDQUFTO0lBQ3pCOEIsa0JBQWtCOUIsdUNBQVEsR0FBRzBCLEdBQUcsR0FBR1gsR0FBRyxDQUFDLENBQUMsR0FBR0MsR0FBRyxDQUFDO0FBQ2pELEdBQUU7QUFFRixpQ0FBaUM7QUFDMUIsTUFBTWUsMkJBQTJCL0Isd0NBQU0sQ0FBQztJQUFDO0lBQVE7SUFBYTtJQUFZO0NBQVMsRUFBQztBQUUzRiwrQkFBK0I7QUFDeEIsTUFBTWlDLHlCQUF5QmpDLHdDQUFNLENBQUM7SUFBQztJQUFXO0lBQWU7Q0FBTyxFQUFDO0FBRWhGLG1HQUFtRztBQUM1RixNQUFNa0Msb0JBQW9CbEMsdUNBQVEsQ0FDdkNBLHVDQUFRLElBQ1JBLHNDQUFPLENBQUNBLHNDQUFPLENBQUM7SUFBQ0EsdUNBQVE7SUFBSUEsdUNBQVE7Q0FBRyxHQUFHLG1DQUFtQztFQUMvRSIsInNvdXJjZXMiOlsid2VicGFjazovL3BhY2VwbGFubmVyLy4vbGliL3ZhbGlkYXRvcnMudHM/NTZiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcclxuXHJcbmV4cG9ydCBjb25zdCBjYW52YXNCYXNlVXJsU2NoZW1hID0gelxyXG4gIC5zdHJpbmcoKVxyXG4gIC50cmFuc2Zvcm0oKHMpID0+IHMudHJpbSgpKVxyXG4gIC5waXBlKHouc3RyaW5nKCkudXJsKCdNdXN0IGJlIGEgdmFsaWQgVVJMJykpXHJcbiAgLnJlZmluZSgodXJsKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBwID0gbmV3IFVSTCh1cmwpO1xyXG4gICAgICByZXR1cm4gcC5ob3N0bmFtZS5lbmRzV2l0aCgnLmluc3RydWN0dXJlLmNvbScpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LCAnTXVzdCBiZSBhIENhbnZhcyBpbnN0YW5jZSBVUkwgKGVuZGluZyB3aXRoIC5pbnN0cnVjdHVyZS5jb20pJylcclxuICAudHJhbnNmb3JtKCh1cmwpID0+IHtcclxuICAgIGNvbnN0IHAgPSBuZXcgVVJMKHVybCk7XHJcbiAgICByZXR1cm4gYCR7cC5wcm90b2NvbH0vLyR7cC5ob3N0bmFtZX1gO1xyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhbnZhc1Rva2VuU2NoZW1hID0gelxyXG4gIC5zdHJpbmcoKVxyXG4gIC50cmFuc2Zvcm0oKHMpID0+IHMudHJpbSgpKVxyXG4gIC5waXBlKHouc3RyaW5nKCkubWluKDIwLCAnVG9rZW4gbG9va3MgdG9vIHNob3J0JykubWF4KDEwMDAsICdUb2tlbiBpcyB0b28gbG9uZycpKTtcclxuXHJcblxyXG4vLyBVc2VyIHNldHRpbmdzIHZhbGlkYXRpb25cclxuZXhwb3J0IGNvbnN0IHVzZXJTZXR0aW5nc1NjaGVtYSA9IHoub2JqZWN0KHtcclxuICB3b3JrV2luZG93c0pzb246IHouc3RyaW5nKCkucmVmaW5lKFxyXG4gICAgKGpzb24pID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb24pXHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBwYXJzZWQgPT09ICdvYmplY3QnICYmIHBhcnNlZCAhPT0gbnVsbFxyXG4gICAgICB9IGNhdGNoIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgICdJbnZhbGlkIHdvcmsgd2luZG93cyBmb3JtYXQnXHJcbiAgKSxcclxuICBkYWlseU1heE1pbnV0ZXM6IHoubnVtYmVyKCkuaW50KCkubWluKDEpLm1heCgxNDQwKSwgLy8gMSBtaW51dGUgdG8gMjQgaG91cnNcclxuICB0aW1lem9uZTogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgdXNlQUlFc3RpbWF0ZXM6IHouYm9vbGVhbigpLFxyXG4gIGFpQWdncmVzc2l2ZW5lc3M6IHoubnVtYmVyKCkuaW50KCkubWluKC0yKS5tYXgoMiksXHJcbn0pXHJcblxyXG4vLyBBc3NpZ25tZW50IHN0cmF0ZWd5IHZhbGlkYXRpb25cclxuZXhwb3J0IGNvbnN0IGFzc2lnbm1lbnRTdHJhdGVneVNjaGVtYSA9IHouZW51bShbJ2V2ZW4nLCAnZnJvbnRsb2FkJywgJ2JhY2tsb2FkJywgJ2N1c3RvbSddKVxyXG5cclxuLy8gQXNzaWdubWVudCBzdGF0dXMgdmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3QgYXNzaWdubWVudFN0YXR1c1NjaGVtYSA9IHouZW51bShbJ3BsYW5uZWQnLCAnaW5fcHJvZ3Jlc3MnLCAnZG9uZSddKVxyXG5cclxuLy8gV29yayB3aW5kb3cgZm9ybWF0OiB7IFwiMVwiOiBbW1wiMTk6MDBcIiwgXCIyMjowMFwiXV0sIFwiMlwiOiBbW1wiMDk6MDBcIiwgXCIxMjowMFwiXSwgW1wiMTQ6MDBcIiwgXCIxNzowMFwiXV0gfVxyXG5leHBvcnQgY29uc3Qgd29ya1dpbmRvd3NTY2hlbWEgPSB6LnJlY29yZChcclxuICB6LnN0cmluZygpLCAvLyBkYXkgb2Ygd2VlayAoMC02LCB3aGVyZSAwIGlzIFN1bmRheSlcclxuICB6LmFycmF5KHoudHVwbGUoW3ouc3RyaW5nKCksIHouc3RyaW5nKCldKSkgLy8gYXJyYXkgb2YgW3N0YXJ0LCBlbmRdIHRpbWUgcGFpcnNcclxuKVxyXG5cclxuZXhwb3J0IHR5cGUgV29ya1dpbmRvd3MgPSB6LmluZmVyPHR5cGVvZiB3b3JrV2luZG93c1NjaGVtYT5cclxuZXhwb3J0IHR5cGUgVXNlclNldHRpbmdzID0gei5pbmZlcjx0eXBlb2YgdXNlclNldHRpbmdzU2NoZW1hPlxyXG5leHBvcnQgdHlwZSBBc3NpZ25tZW50U3RyYXRlZ3kgPSB6LmluZmVyPHR5cGVvZiBhc3NpZ25tZW50U3RyYXRlZ3lTY2hlbWE+XHJcbmV4cG9ydCB0eXBlIEFzc2lnbm1lbnRTdGF0dXMgPSB6LmluZmVyPHR5cGVvZiBhc3NpZ25tZW50U3RhdHVzU2NoZW1hPlxyXG4iXSwibmFtZXMiOlsieiIsImNhbnZhc0Jhc2VVcmxTY2hlbWEiLCJzdHJpbmciLCJ0cmFuc2Zvcm0iLCJzIiwidHJpbSIsInBpcGUiLCJ1cmwiLCJyZWZpbmUiLCJwIiwiVVJMIiwiaG9zdG5hbWUiLCJlbmRzV2l0aCIsInByb3RvY29sIiwiY2FudmFzVG9rZW5TY2hlbWEiLCJtaW4iLCJtYXgiLCJ1c2VyU2V0dGluZ3NTY2hlbWEiLCJvYmplY3QiLCJ3b3JrV2luZG93c0pzb24iLCJqc29uIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiZGFpbHlNYXhNaW51dGVzIiwibnVtYmVyIiwiaW50IiwidGltZXpvbmUiLCJ1c2VBSUVzdGltYXRlcyIsImJvb2xlYW4iLCJhaUFnZ3Jlc3NpdmVuZXNzIiwiYXNzaWdubWVudFN0cmF0ZWd5U2NoZW1hIiwiZW51bSIsImFzc2lnbm1lbnRTdGF0dXNTY2hlbWEiLCJ3b3JrV2luZG93c1NjaGVtYSIsInJlY29yZCIsImFycmF5IiwidHVwbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/validators.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconnect%2Froute&page=%2Fapi%2Fconnect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconnect%2Froute.ts&appDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Czhoum%5COneDrive%5CDesktop%5CPacePlanner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();